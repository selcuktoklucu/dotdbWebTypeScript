(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{42:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},50:function(e,t,a){e.exports=a(82)},55:function(e,t,a){},56:function(e,t,a){},80:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),c=a(15),s=a.n(c),l=(a(55),a(3)),u=(a(56),a(57),a(12)),i=a(14),m=a(13),p="http://localhost:4741",d="https://dotdot-api.herokuapp.com",h=(n="localhost"===window.location.hostname?p:d,a(38)),f=a.n(h),b=a(16),E=function(e){var t=Object(r.useState)(),a=Object(l.a)(t,2),c=a[0],s=a[1],u=Object(r.useState)(),i=Object(l.a)(u,2),p=i[0],d=i[1],h=Object(r.useState)(),f=Object(l.a)(h,2),E=f[0],g=f[1];return o.a.createElement("div",{className:"col-md-6 m-auto py-3"},o.a.createElement("form",{className:"auth-form",onSubmit:function(t){t.preventDefault(),function(e){return fetch("".concat(n,"/sign-up/"),{method:"Post",headers:{Accept:"application/json","Content-Type":"application/json","Accept-Language":"ru,en;q=0.9"},body:JSON.stringify({credentials:{email:"".concat(e.email),password:"".concat(e.password),password_confirmation:"".concat(e.passwordConfirmation)}})})}({email:c,password:p,passwordConfirmation:E}).then((function(){return console.log(c)})).then((function(e){return console.log(c,e)})).then((function(){return e.setAlerts([].concat(Object(m.a)(e.alerts),[{title:"Sign up Successful",variant:"success"}]))})).then((function(){return console.log("pro")})).catch((function(t){console.error("ERR",t),e.setAlerts([].concat(Object(m.a)(e.alerts),[{title:"Hello",variant:"success"}]))}))}},o.a.createElement("h3",null,"Sign Up"),o.a.createElement("label",{htmlFor:"email"},"Email"),o.a.createElement("input",{required:!0,name:"email",value:c,type:"email",placeholder:"Email",onChange:function(e){return s(e.target.value)}}),o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("input",{required:!0,name:"password",value:p,type:"password",placeholder:"Password",onChange:function(e){return d(e.target.value)}}),o.a.createElement("label",{htmlFor:"passwordConfirmation"},"Confirm Password"),o.a.createElement("input",{required:!0,name:"passwordConfirmation",value:E,type:"password",placeholder:"Confirm Password",onChange:function(e){return g(e.target.value)}}),o.a.createElement(b.a,{variant:"primary",type:"submit"},"Submit")))},g=a(21),v=function(e){var t=Object(r.useState)("st@st.com"),a=Object(l.a)(t,2),c=a[0],s=a[1],u=Object(r.useState)("stst"),p=Object(l.a)(u,2),d=p[0],h=p[1],E=Object(i.g)();Object(g.b)();return o.a.createElement("div",{className:"col-md-6 m-auto py-3"},o.a.createElement("form",{className:"auth-form",onSubmit:function(t){t.preventDefault(),function(e){return f()({url:n+"/sign-in",method:"POST",data:{credentials:{email:e.email,password:e.password}}})}({email:c,password:d}).then((function(t){e.setUser(t.data.user)})).then((function(){return e.setAlerts([].concat(Object(m.a)(e.alerts),[{title:"Welcome",variant:"success"}]))})).then((function(){E.push("/new-order")})).catch((function(t){console.error(t),e.setAlerts([].concat(Object(m.a)(e.alerts),[{title:"Welcome",variant:"failed"}]))}))}},o.a.createElement("h3",null,"Sign In"),o.a.createElement("label",{htmlFor:"email"},"Email"),o.a.createElement("input",{required:!0,name:"email",value:c,type:"email",placeholder:"Email",onChange:function(e){return s(e.target.value)}}),o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("input",{required:!0,name:"password",value:d,type:"password",placeholder:"Password",onChange:function(e){return h(e.target.value)}}),o.a.createElement(b.a,{variant:"primary",type:"submit"},"Sign In")))},w=(a(80),a(42)),O=a.n(w),j=o.a.createElement(o.a.Fragment,null,o.a.createElement(u.b,{to:"/new-order"},"New Order"),o.a.createElement(u.b,{to:"/change-password"},"Change Password"),o.a.createElement(u.b,{to:"/sign-out"},"Sign Out")),y=o.a.createElement(o.a.Fragment,null,o.a.createElement(u.b,{to:"/sign-up"},"Sign Up"),o.a.createElement(u.b,{to:"/sign-in"},"Sign In")),S=o.a.createElement(o.a.Fragment,null,o.a.createElement(u.b,{to:"/"},"Home")),x=function(e){var t=e.user;return o.a.createElement("header",{className:"main-header"},o.a.createElement("img",{src:O.a,className:"App-logo",alt:"logo"}),o.a.createElement("h1",null,"The Dot DB"),o.a.createElement("nav",null,t&&o.a.createElement("span",null,"Welcome, ",t.email),t?j:y,S))},C=a(47),A=function(e){var t=e.user,a=e.component,n=e.render,r=Object(C.a)(e,["user","component","render"]);return t&&n?o.a.createElement(i.b,Object.assign({},r,{render:n})):o.a.createElement(i.b,Object.assign({},r,{render:function(e){return t?o.a.createElement(a,e):o.a.createElement(i.a,{to:"/"})}}))},N=a(43),k=a(44),P=a(46),F=a(45),T=a(48),U=a(27),q=function(e){function t(e){var a;return Object(N.a)(this,t),(a=Object(P.a)(this,Object(F.a)(t).call(this,e))).timer=void 0,a.handleClose=function(){return a.setState({show:!1})},a.state={show:!0},a}return Object(T.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval((function(){e.setState({show:!1})}),4e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){var e=this.props.alert;return o.a.createElement(U.a,{dismissible:!0,show:this.state.show,variant:e.variant,onClose:this.handleClose},o.a.createElement("div",{className:"container"},o.a.createElement(U.a.Heading,null,e.title)))}}]),t}(o.a.Component),I=a(5),B=a.n(I),D=function(e,t){var a,r,o;return B.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a=t.token,c.next=3,B.a.awrap(fetch("".concat(n,"/customers/").concat(e),{method:"GET",headers:{Authorization:"Bearer "+a}}));case 3:if(200!==(r=c.sent).status){c.next=11;break}return c.next=7,B.a.awrap(r.json());case 7:return o=c.sent,c.abrupt("return",o);case 11:return c.abrupt("return",!1);case 12:case"end":return c.stop()}}))},W=function(e,t){var a,r,o;return B.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a=t.token,c.next=3,B.a.awrap(fetch("".concat(n,"/google-maps-masker/").concat(e),{method:"GET",headers:{Authorization:"Bearer "+a}}));case 3:if(200!==(r=c.sent).status){c.next=12;break}return c.next=7,B.a.awrap(r.json());case 7:return o=c.sent,console.log("responseJson",o),c.abrupt("return",o);case 12:return c.abrupt("return",!1);case 13:case"end":return c.stop()}}))},J=function(e,t){var a,r,o;return B.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a=t.token,c.next=3,B.a.awrap(fetch("".concat(n,"/customers/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a},body:JSON.stringify({customer:{name:e.name,phone:e.phoneNumber,currentAddress:e.address}})}));case 3:return r=c.sent,c.next=6,B.a.awrap(r.json());case 6:return o=c.sent,console.log("reponse postAddress",o,"responseCode",r.status),c.abrupt("return",1===r.status);case 9:case"end":return c.stop()}}))},z=function(e){var t=Object(r.useState)(""),a=Object(l.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(),u=Object(l.a)(s,2),i=u[0],p=u[1],d=Object(r.useState)(),h=Object(l.a)(d,2),f=h[0],E=h[1],g=Object(r.useState)(),v=Object(l.a)(g,2),w=v[0],O=v[1],j=Object(r.useState)(),y=Object(l.a)(j,2),S=y[0],x=y[1],C=Object(r.useState)(),A=Object(l.a)(C,2),N=A[0],k=A[1];return Object(r.useEffect)((function(){!function(){var t;B.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n||10!==n.length){a.next=5;break}return a.next=3,B.a.awrap(D(n,e.user));case 3:(t=a.sent)?p(t.customer.currentAddress):e.setAlerts([].concat(Object(m.a)(e.alerts),[{title:"Address not found! Please create one",variant:"success"}]));case 5:case"end":return a.stop()}}))}()}),[n]),Object(r.useEffect)((function(){!function(){var t,a;B.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(i&&i.length>4)){n.next=8;break}return n.next=3,B.a.awrap(W(i,e.user));case 3:!1===(t=n.sent)&&e.setAlerts([].concat(Object(m.a)(e.alerts),[{title:"getSuggestions failed. Please change the input and try again",variant:"danger"}])),console.log("retrieved addresses",t.response),a=t.response,k(Object(m.a)(a));case 8:case"end":return n.stop()}}))}()}),[i]),o.a.createElement("div",{className:"col-md-6 m-auto py-3"},o.a.createElement("form",{className:"auth-form",onSubmit:function(){return console.log("heyo")}},o.a.createElement("h3",null,"Add new order"),o.a.createElement("label",{htmlFor:"number"},"Phone Number"),o.a.createElement("input",{required:!0,type:"text",pattern:"[0-9]",name:"phoneNumber",value:n,placeholder:"6172 827141",maxLength:10,onChange:function(e){(""===e.target.value||/^[0-9\b]+$/.test(e.target.value))&&c(e.target.value)}}),o.a.createElement("label",{htmlFor:"text"},"Address"),o.a.createElement("input",{required:!0,name:"Address",value:i,type:"text",placeholder:"566 Columbia Rd",onChange:function(e){return p(e.target.value)}}),o.a.createElement("label",{htmlFor:"text"},"Name"),o.a.createElement("input",{name:"name",value:f,type:"text",placeholder:"Big Papa",onChange:function(e){return E(e.target.value)}}),o.a.createElement("label",{htmlFor:"number"},"Order Total"),o.a.createElement("input",{name:"orderTotal",value:w,type:"number",placeholder:"Optional",onChange:function(e){return O(e.target.value)}}),o.a.createElement("label",{htmlFor:"email"},"Date"),o.a.createElement("input",{name:"date",value:S,type:"date",placeholder:"Optional",onChange:function(e){return x(e.target.value)}}),N&&N.length>0&&N.map((function(t,a){return o.a.createElement(b.a,{variant:"primary",key:a,type:"button",onClick:function(){!function(e,t,a,n){B.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:J({phoneNumber:e,address:t,name:a},n);case 2:case"end":return r.stop()}}))}(n,t.description,f,e.user),c(""),p(""),E(""),O(""),x(""),k("")}},t.description)}))))},H=o.a.useState,R=function(){var e=H(),t=Object(l.a)(e,2),a=t[0],n=t[1],r=H([]),c=Object(l.a)(r,2),s=c[0],m=c[1];return o.a.createElement("div",{className:"App"},o.a.createElement("main",{className:"container"},o.a.createElement(u.a,null,o.a.createElement(x,{user:a}),s.length>0&&s.map((function(e,t){return o.a.createElement(q,{key:t,dismissible:!0,onClose:function(){return m([])},alert:e},o.a.createElement("p",null,e.title))})),o.a.createElement(i.d,null,o.a.createElement(A,{user:a,exact:!0,path:"/",render:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Under Construction"))}}),o.a.createElement(A,{user:a,exact:!0,path:"/new-order",render:function(){return o.a.createElement(z,{alerts:s,setAlerts:m,user:a})}}),o.a.createElement(A,{user:a,exact:!0,path:"/change-password",render:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Under Construction"))}}),o.a.createElement(i.b,{path:"/sign-up",render:function(){return o.a.createElement(E,{alerts:s,setAlerts:m,setUser:n})}}),a?null:o.a.createElement(i.b,{path:"/sign-in",render:function(){return o.a.createElement(v,{alerts:s,setAlerts:m,setUser:n})}})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=a(49),L="UPDATE_SESSION",$={loggedIn:!1,session:"",userName:""};var _=a(20),M=Object(_.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(G.a)({},e,{},t.payload);default:return e}}));s.a.render(o.a.createElement(g.a,{store:M},o.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[50,1,2]]]);
//# sourceMappingURL=main.39f8c76c.chunk.js.map